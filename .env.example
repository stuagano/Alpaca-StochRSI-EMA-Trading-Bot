# Core Alpaca credentials
ALPACA_AUTH_FILE=AUTH/authAlpaca.txt
APCA_API_KEY_ID=your-paper-key
APCA_API_SECRET_KEY=your-paper-secret
APCA_API_BASE_URL=https://paper-api.alpaca.markets

# Container images
POSTGRES_IMAGE=postgres:15-alpine
REDIS_IMAGE=redis:7.2-alpine
PROMETHEUS_IMAGE=prom/prometheus:v2.49.1
GRAFANA_IMAGE=grafana/grafana-oss:10.2.3

# Local directories & automation
LOCAL_DATA_ROOT=./.localstack
LOCAL_LOG_LEVEL=INFO
COMPOSE_PROJECT_NAME=alpaca_scalper
LOCAL_SERVICES_ENABLED=core,analytics
ML_PROFILE_ENABLED=false
PRECOMMIT_PROFILES=lint,type,security
CI_PARALLELISM=4
INTEGRATION_TEST_SERVICES=postgres,redis,prometheus

# Database configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=scalper
DB_USER=scalper
DB_PASSWORD=please-change-me
DATABASE_URL=postgresql://scalper:please-change-me@localhost:5432/scalper
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=5

# Compose-specific overrides (populated automatically by scripts)
COMPOSE_POSTGRES_HOST=postgres
COMPOSE_REDIS_HOST=redis

# Redis configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_TLS_ENABLED=false
REDIS_URL=redis://localhost:6379/0

# Observability
PROMETHEUS_EXPORTER_PORT=9464
PROMETHEUS_WEB_PORT=9090
PROMETHEUS_CONFIG_PATH=./config/observability/prometheus.yml
GRAFANA_PROVISIONING_PATH=./config/observability/grafana
GRAFANA_PORT=3000

# Runtime controls
DOCKER_COMPOSE_DEFAULT_PROFILE=core
LOCAL_HEALTHCHECK_PORT=8085
PROCESS_RESTART_BACKOFF_SECONDS=5
WS_HEARTBEAT_INTERVAL_SECONDS=15
WS_MAX_RECONNECT_ATTEMPTS=8
WS_RETRY_BACKOFF_SECONDS=5

# Unified trading service behaviour
TRADING_SERVICE_CRYPTO_SYMBOLS=BTC/USD,ETH/USD,LTC/USD,BCH/USD,LINK/USD,UNI/USD,AAVE/USD,MKR/USD,MATIC/USD,AVAX/USD,DOGE/USD,SHIB/USD,XRP/USD,ADA/USD,SOL/USD
TRADING_SERVICE_CRYPTO_SCANNER_INTERVAL_SECONDS=60
TRADING_SERVICE_CACHE_REFRESH_SECONDS=5
TRADING_SERVICE_SCALPER_POLL_SECONDS=10
TRADING_SERVICE_SCALPER_COOLDOWN_SECONDS=60
TRADING_SERVICE_MAX_CONCURRENT_POSITIONS=3
TRADING_SERVICE_DAILY_LOSS_LIMIT=200.0

# Risk management
RISK_LOOKBACK_DAYS=90
RISK_CONFIDENCE_INTERVAL=0.95
KELLY_CAPITAL_FRACTION_CAP=0.2
RISK_API_BIND=0.0.0.0:8090
RISK_API_PORT=8090
RISK_API_RATE_LIMIT_PER_MINUTE=120
RISK_WORKER_INTERVAL_SECONDS=60

# Backtesting controls
BACKTEST_DATA_DIR=./database/backtests
BACKTEST_CONCURRENCY=2
BACKTEST_RETENTION_DAYS=30

# Feature toggles & strategy orchestration
ENABLED_STRATEGIES=stoch_rsi_scalper
DEFAULT_POSITION_SIZE_BPS=100
OCO_ENABLED=false
SUPPORTED_EXCHANGES=alpaca
DEFAULT_EXCHANGE_PRIORITY=alpaca

# Machine learning & signals
ML_MODEL_ENDPOINT=
ML_MODEL_TIMEOUT_SECONDS=2
ML_SIGNAL_THRESHOLD=0.7
SENTIMENT_SIGNAL_WEIGHT=0.15
SENTIMENT_POLL_INTERVAL_SECONDS=300

# Observability & telemetry
ENABLE_PROMETHEUS_METRICS=true
OTEL_EXPORTER_OTLP_ENDPOINT=



# Frontend configuration
NEXT_PUBLIC_ENABLE_VIRTUAL_SCROLLING=true
NEXT_PUBLIC_DASHBOARD_PAGINATION_SIZE=50
FRONTEND_INDICATOR_EDITING_ENABLED=false
DASHBOARD_SESSION_TIMEOUT_MINUTES=30

# Optional overrides
# TRADING_SERVICE_CRYPTO_METADATA={"BTC/USD": {"name": "Bitcoin", "exchange": "FTXU"}}
# Scanner symbols are derived from the strategy; override via TRADING_SERVICE_CRYPTO_SYMBOLS if required

# Fix validation script toggles (optional)
# PYTEST_ARGS="tests/functional -m not paper_trading"
# RUN_COVERAGE=0
# COVERAGE_ARGS="--cov=app --cov=strategies --cov=config"
# RUN_PLAYWRIGHT=0
# PLAYWRIGHT_ARGS=""
